### 变量
`${a}_file` {}能界定变量名，避免受旁边的字符干扰
`echo ${foo:-"replace string"}` foo变量未设置或为空时，返回-后面的值
`echo ${foo:="replace string"}` foo变量未设置或为空时，返回-后面的值，并赋值给foo
`echo ${foo:?"replace string"}` foo变量未设置或为空时，展开导致脚本带有错误退出，并且 word 的内容会发送到标准错误
`echo ${foo:+"replace string"}` 若 foo 没有设置或为空，展开结果为空。若 foo 不为空，展开结果是 word 的值会替换掉 foo 的值；然而，foo 的值不会改变
`${!foo*}`或`${!foo@}` 返回已foo开头的已有变量名


### 软硬链接
硬链接：等同于指针，删除指针不会删除磁盘上的内容，删除所有指针才会删除磁盘内容

软链接（符号链接）：存放的是它指向文件的绝对路劲，访问时会替换成绝对路径


### 文件权限
setuid位: `chmod u+s $filename` 使真正执行该文件的用户具有超级用户的权限
setgid位: `chmod g+s $filename` 使当前用户具有该文件夹的所属组的权限，而不是自己所属组的权限
sticky位：`chmod +t $filename`  这个继承于 Unix，在 Unix 中，它可能把一
个可执行文件标志为“不可交换的”。在 Linux 中，会忽略文件的 sticky 位，但是
如果一个目录设置了 sticky 位，那么它能阻止用户删除或重命名文件，除非用户是
这个目录的所有者，或者是文件所有者，或是超级用户。这个经常用来控制访问共
享目录，比方说/tmp。


### 信号：内核给进程发送的消息
HUP 1 挂起 hangup	用来告诉程序，控制的终端机已经挂断。当前终端运行的前台程序收到这个信号后将会终止。许多守护程序常用此信号来重新初始化。
INT 2 中断 interrupt
QUIT 3 退出 
TSTP  终端停止 terminal stop
TERM 15 终止 termial
CONT 18 继续 恢复当前停止的进程
STOP 19 停止 停止当前进程
KILL 9 杀死 当其他中断信号失败，此信号可强制杀死当前进程

`kill -l` 查看所有信号
其中1至31的信号为传统UNIX支持的信号，是不可靠信号(非实时的)，32到63的信号是后来扩充的，称做可靠信号(实时信号)。
不可靠信号和可靠信号的区别在于前者不支持排队，可能会造成信号丢失，而后者不会


### 设置PS1格式

```
PS1="\[\e[37;40m\][\[\e[32;40m\]\u\[\e[37;40m\]@\h \[\e[36;40m\]\w\[\e[0m\]]\\$ "
```

### shell会话
登录shell会话加载：
/etc/profile 所有用户的全局配置脚本
~/.bash_profile 用户个人的启动文件，可以自定义个人的配置或重写全局配置
~/.bash_login 若没有.bash_profile则读取该文件
~/.profile 如果.bash_profile和.bash_login都没有，则读取该文件 (Ubuntu)

非登录shell会话加载：
/etc/bash.bashrc  所有用户的全局配置脚本
~/.bashrc 用户个人的启动文件，可以自定义个人的配置或重写全局配置

### vim
替换字符串，命令模式下
```
:%s/Line/line/g
```

多文件同时编辑
```
vim t1.txt t2.txt
```
命令模式下，`:n`切换到下一个文件编辑，`:N`切换到上一个文件，`:buffers`显示所有待编辑文件，`:buffer 文件编号`编辑指定文件，`:e 文件名`，新增编辑文件

代码格式化
https://aiezu.com/article/linux_vim_plugin_autoformat_install.html

### tips
处理带空格的文件名
find 命令提供的 -print0 行为，则会产生由 null 字符分离的输出，并且 xargs 命令有一个 –null 选项，这个选项会接受由 null 字符分离的输入
```
find ∼ -iname ‘*.jpg’ -print0 xargs –null ls -l
```

### 正则表达式
`^` 标识开头位置，在`[]`中表示否定
`$` 标识结尾位置
`-` 在`[]`中用作连字符，但是位置在第一个字符时将视为普通字符

基本正则表达式元字符(BR)
`^ $ . [] *`

扩展正则表达式元字符
`( ) { } ? + |`
`|` 表示或的意思，a|b|c 
`()` 用作表达式分隔符，分隔作用域

限定符
`?` 限定0个或1个
`+` 限定1个或多个
`*` 限定0个或多个
`{}` 限定前面字符出现次数，`{n}`限定出现n次，`{n,m}`限定出现至少n次，但不多于m次，`{n,}`限定出现大等于n次，`{,m}`限定小等于m次

### 位置参数
接收命令行选项和参数，不带命令行参数，位置参数 $0 总会包含命令行中出现的第一个单词，也就是已执行程序的路径名
`$0 $1 $2 $3 ...` 大于9的要用{}`${10} ${100}`
`$#` 表示命令行参数个数
`$*` 表示命令行从第一个参数开始算的所有参数，当它被用双引号引起来的时候，展开成一个由双引号引起来的字符串，包含了所有的位置参数，每个位置参数由 shell 变量 IFS 的第一个字符（默认为一个空格）分隔开
`$@` 表示命令行从第一个参数开始算的所有参数，当它被用双引号引起来的时候，它把每一个位置参数展开成一个由双引号引起来的分开的字符串。
`"$@"`最常用，因为保留了原始参数的完整性

### 常用命令
pstree 显示父子进程关系
traceroute 打印到一台网络主机的路由数据包